@extends('index')
@section('pagination')
    @foreach ($transaction as $trx)
        @if(isset($trx->payments))
            <tr class="module" data-toggle="contextmenu" data-trigger="right" data-type="transaction" data-id="{{ $trx->id }}">
                <td class="text-center desktop"><a href="{{ route('frontend.auth.user.artist.manager.albums.show', ['id' => $trx->albums->id]) }}">NEX{{ $trx->transaction_id }}</a></td>
                <td class="text-center"><a href="{{ route('frontend.auth.user.artist.manager.albums.show', ['id' => $trx->albums->id]) }}">{{$trx->albums->title}}</a></td>
                <td class="text-center">Rp {{ number_format((float)($trx->amount), 0, ',', '.') }}</td>
                <td class="text-center text-danger">Rp {{ number_format((float)($trx->nilai_voucher), 0, ',', '.') }}</td>
                <td class="text-center text-danger">Rp {{ number_format((float)($trx->nilai_free_song), 0, ',', '.') }}</td>
                <td class="text-center text-success">Rp {{ number_format((float)($trx->amount-$trx->nilai_voucher-$trx->nilai_free_song), 0, ',', '.') }}</td>
                <td class="text-center">
                    @if($trx->status == 0)
                        <span class="badge badge-danger">Pending</span>
                    @else
                        <span class="badge badge-success">Paid</span>
                    @endif
                </td>
                <td class="text-center">{{ $trx->payment_type }}</td>
                <td class="text-center">{{\Carbon\Carbon::parse($trx->payments->created_at)->format('M j, Y')}}</td>
                <td>
                    <a class="btn options" href="{{ route('frontend.auth.user.artist.manager.albums.invoice', ['id' => $trx->id]) }}" data-toggle="contextmenu" data-trigger="left" data-type="song" data-id="{{ $trx->id }}">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-file-earmark" viewBox="0 0 16 16">
                            <path d="M14 4.5V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5L14 4.5zm-3 0A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4.5h-2z"/>
                        </svg>
                    </a>
                </td>
            </tr>
        @endif
    @endforeach
@stop
@section('content')
    @include('artist-management.nav', ['artist' => $artist])
    <div id="page-content">
        <div class="container">
            <div class="page-header artist main small desktop"> <a class="img "> <img src="{{ $artist->artwork_url }}" alt="{{ $artist->name}}">  </a>
                <div class="inner">
                    <h1 title="{!! auth()->user()->email; !!}">{!! auth()->user()->email; !!}<span class="subpage-header"> / Artists</span></h1>
                    <div class="byline">Your Transaction History</div>
                </div>
            </div>
            @include('artist-management.nav-transaction')
            <br/>
            <div id="page-content" class="p-0">
                <div id="column1" class="full">
                    @if(count($transaction))
                        <div class="card shadow">
                            <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                <h2 class="m-0 font-weight-bold" data-translate-text="Transaction">Transaction</h2>
                            </div>
                            <div class="card-body">
                                <table class="table artist-management">
                                    <thead>
                                    <tr>
                                        <th class="text-center">Transaction Id</th>
                                        <th class="text-center">Album Name</th>
                                        <th class="text-center">Amount</th>
                                        <th class="text-center">Coupon Value</th>
                                        <th class="text-center">Free Song Value</th>
                                        <th class="text-center">Total Payment</th>
                                        <th class="text-center">Status</th>
                                        <th class="text-center">Payment Type</th>
                                        <th class="text-center">Payment Date</th>
                                        <th></th>
                                    </tr>
                                    </thead>
                                    <tbody class="infinity-load-more">
                                        @yield('pagination')
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    @endif
                </div>
            </div>
        </div>
    </div>
@endsection